<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>סתם סופר</title>
<style>
  body{font-family:Arial, sans-serif; max-width:980px; margin:24px auto; padding: 0 15px;}
  h1{margin-bottom:4px}
  ul{line-height:1.9; padding-right: 20px;}
  li { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; flex-wrap: wrap; gap: 10px;}
  .project-link { flex-grow: 1; }
  .delete-form button { background: #fdd; border: 1px solid #f99; color: #800; border-radius: 4px; cursor: pointer; padding: 2px 8px; }
  form { display: flex; flex-wrap: wrap; gap: 10px; align-items: center;}
</style>
</head>
<body>
<h1>✍ סתם סופר</h1>
<h2>בחר או צור פרויקט</h2>
<form action="/new_project" method="post" id="newProjectForm">
  שם פרויקט: <input type="text" name="name" required>
  סוג: <select name="kind" id="projectKind">
    <option value="פרוזה">פרוזה</option>
    <option value="קומיקס">קומיקס</option>
  </select>
  
  <span id="proseOptions">
    קהל יעד: <select name="age_group">
      <option value="מבוגרים">מבוגרים (14+)</option>
      <option value="נוער">נוער (10-15)</option>
      <option value="ילדים">ילדים (8-12)</option>
    </select>
  </span>

  <span id="comicOptions" style="display:none;">
    מספר עמודים כללי: <input type="number" name="total_pages" value="54" style="width: 60px;">
    מספר פרקים: <input type="number" name="chapters" value="18" style="width: 60px;">
    פריימים לעמוד: <input type="number" name="frames_per_page" value="6" style="width: 60px;">
  </span>

  <button type="submit">צור</button>
</form>
<hr>
<ul>
{% for p in projects %}
<li>
  <a href="/project/{{p.id}}" class="project-link">{{p.name}} ({{p.kind}})</a>
  <form class="delete-form" action="/delete_project/{{p.id}}" method="post" onsubmit="return confirm('האם אתה בטוח שברצונך למחוק את הפרויקט? פעולה זו היא בלתי הפיכה.');">
    <button type="submit">מחק</button>
  </form>
</li>
{% endfor %}
</ul>

<script>
  const projectKind = document.getElementById('projectKind');
  const proseOptions = document.getElementById('proseOptions');
  const comicOptions = document.getElementById('comicOptions');
  
  projectKind.addEventListener('change', function() {
    if (this.value === 'פרוזה') {
      proseOptions.style.display = 'inline-block';
      comicOptions.style.display = 'none';
    } else {
      proseOptions.style.display = 'none';
      comicOptions.style.display = 'inline-block';
    }
  });
  projectKind.dispatchEvent(new Event('change'));
</script>

</body>
</html>